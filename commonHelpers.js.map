{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst elements = {\n  input: document.querySelector('#datetime-picker'),\n  start: document.querySelector('[data-start]'),\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n  timer: document.querySelector('.timer'),\n};\nlet intervalId;\nlet userSelectedDate;\n\nelements.start.disabled = true;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: Date.now(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const selectedDate = selectedDates[0];\n    const currentDate = Date.now();\n    userSelectedDate = selectedDate;\n\n    if (selectedDate < currentDate) {\n      notifyPastTimedate();\n      elements.start.disabled = true;\n    } else {\n      elements.start.disabled = false;\n    }\n  },\n};\n\nconst picker = flatpickr(elements.input, options);\nelements.start.addEventListener('click', onStartClick);\n\nfunction onStartClick() {\n  elements.start.disabled = true;\n  elements.input.disabled = true;\n\n  if (intervalId) {\n    clearInterval(intervalId);\n  }\n  updateTimer();\n  intervalId = setInterval(updateTimer, 1000);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction updateTimer() {\n  const selectedDate = userSelectedDate;\n  const currentDate = Date.now();\n  const ms = selectedDate - currentDate;\n\n  if (ms <= 0) {\n    clearInterval(intervalId);\n    elements.input.disabled = false;\n  } else {\n    const timeObject = convertMs(ms);\n\n    elements.days.textContent = addLeadingZero(timeObject.days);\n    elements.hours.textContent = addLeadingZero(timeObject.hours);\n    elements.minutes.textContent = addLeadingZero(timeObject.minutes);\n    elements.seconds.textContent = addLeadingZero(timeObject.seconds);\n  }\n}\nfunction addLeadingZero(value) {\n  return value < 10 ? String(value).padStart(2, '0') : value;\n}\n\nfunction notifyPastTimedate() {\n  iziToast.warning({\n    theme: 'dark',\n    position: 'topRight',\n    message: 'Please choose a date in the future',\n    messageSize: '22',\n    backgroundColor: '#fd4b3f',\n    messageColor: '#fafafa',\n    close: false,\n    closeOnClick: false,\n    timeout: '3000',\n    pauseOnHover: true,\n    progressBar: false,\n    transitionIn: 'fadeIn',\n    transitionOut: 'fadeOut',\n  });\n}\n"],"names":["elements","intervalId","userSelectedDate","options","selectedDates","selectedDate","currentDate","notifyPastTimedate","flatpickr","onStartClick","updateTimer","convertMs","ms","days","hours","minutes","seconds","timeObject","addLeadingZero","value","iziToast"],"mappings":"0IAMA,MAAMA,EAAW,CACf,MAAO,SAAS,cAAc,kBAAkB,EAChD,MAAO,SAAS,cAAc,cAAc,EAC5C,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,EAChD,MAAO,SAAS,cAAc,QAAQ,CACxC,EACA,IAAIC,EACAC,EAEJF,EAAS,MAAM,SAAW,GAE1B,MAAMG,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,KAAK,IAAK,EACvB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAeD,EAAc,CAAC,EAC9BE,EAAc,KAAK,MACzBJ,EAAmBG,EAEfA,EAAeC,GACjBC,IACAP,EAAS,MAAM,SAAW,IAE1BA,EAAS,MAAM,SAAW,EAE7B,CACH,EAEeQ,EAAUR,EAAS,MAAOG,CAAO,EAChDH,EAAS,MAAM,iBAAiB,QAASS,CAAY,EAErD,SAASA,GAAe,CACtBT,EAAS,MAAM,SAAW,GAC1BA,EAAS,MAAM,SAAW,GAEtBC,GACF,cAAcA,CAAU,EAE1BS,IACAT,EAAa,YAAYS,EAAa,GAAI,CAC5C,CAEA,SAASC,EAAUC,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASN,GAAc,CACrB,MAAML,EAAeH,EACfI,EAAc,KAAK,MACnBM,EAAKP,EAAeC,EAE1B,GAAIM,GAAM,EACR,cAAcX,CAAU,EACxBD,EAAS,MAAM,SAAW,OACrB,CACL,MAAMiB,EAAaN,EAAUC,CAAE,EAE/BZ,EAAS,KAAK,YAAckB,EAAeD,EAAW,IAAI,EAC1DjB,EAAS,MAAM,YAAckB,EAAeD,EAAW,KAAK,EAC5DjB,EAAS,QAAQ,YAAckB,EAAeD,EAAW,OAAO,EAChEjB,EAAS,QAAQ,YAAckB,EAAeD,EAAW,OAAO,CACjE,CACH,CACA,SAASC,EAAeC,EAAO,CAC7B,OAAOA,EAAQ,GAAK,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAAIA,CACvD,CAEA,SAASZ,GAAqB,CAC5Ba,EAAS,QAAQ,CACf,MAAO,OACP,SAAU,WACV,QAAS,qCACT,YAAa,KACb,gBAAiB,UACjB,aAAc,UACd,MAAO,GACP,aAAc,GACd,QAAS,OACT,aAAc,GACd,YAAa,GACb,aAAc,SACd,cAAe,SACnB,CAAG,CACH"}