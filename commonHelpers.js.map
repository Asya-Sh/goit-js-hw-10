{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації Flatpickr\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n\n  // Описаний у документації iziToast\n  import iziToast from \"izitoast\";\n  // Додатковий імпорт стилів\n  import \"izitoast/dist/css/iziToast.min.css\";\n  \nconst elements = {\n    input: document.querySelector('#datetime-picker'),\n    start: document.querySelector('[data-start]'),\n    days: document.querySelector('[data-days]'),\n    hours: document.querySelector('[data-hours]'),\n    minutes: document.querySelector('[data-minutes]'),\n    seconds: document.querySelector('[data-seconds]'),\n    timer: document.querySelector('.timer'),\n  };\n  let intervalId;\n  elements.start.addEventListener('click', onStartClick);\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: Date.now(),\n    minuteIncrement: 1,\n    onClose: onDatePeckerClose,\n  };\n\n  const picker = flatpickr(elements.input, options);\n\n  function onDatePeckerClose (selectedDates) {\n    const selectedDate = selectedDates[0];\n    const currentDate = Date.now();\n    if (selectedDate < currentDate) {\n   notifyPastTimedate();\n      elements.start.disabled = true; // кнопка \"Start\" неактивною\n    } else {\n      elements.start.disabled = false; // кнопка \"Start\" активною\n    }\n    // зберегти selectedDate в об'єкті\n    picker.selectedDate = selectedDate;\n};\n\n  function onStartClick() {\n    const between = picker.selectedDates[0].getTime() - Date.now();\n    if (between <= 0) {\n      notifyPastTimedate();\n      return;\n    }\n    elements.input.disabled = true;\n    elements.start.disabled = true;\n    updateTimer();\n  \n    intervalId = setInterval(updateTimer, 1000);\n  }\n  //Конвертує мс\n  function convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }\n\n  //Обчислення різниці часу \nfunction updateTimer() {\n    const selectedDate = picker.selectedDate;\n    const currentDate = Date.now();\n    const ms = selectedDate - currentDate;\n  \n    if (ms < 1000) {\n      // Час вийшов, зупиняємо інтервал\n      clearInterval(intervalId);\n  \n      elements.days.textContent = '00';\n      elements.hours.textContent = '00';\n      elements.minutes.textContent = '00';\n      elements.seconds.textContent = '00';\n    } else {\n      // оновлює інтерфейс\n      const timeObject = convertMs(ms);\n  \n      elements.days.textContent = addLeadingZero(timeObject.days);\n      elements.hours.textContent = addLeadingZero(timeObject.hours);\n      elements.minutes.textContent = addLeadingZero(timeObject.minutes);\n      elements.seconds.textContent = addLeadingZero(timeObject.seconds);\n    }\n  }\n  \n  function addLeadingZero(value) {\n    return value < 10 ? String(value).padStart(2, '0') : value;\n  }\n  \n  elements.start.addEventListener('click', () => {\n    // обчислює раз на секунду\n    intervalId = setInterval(updateTimer, 1000);;\n  });\n\n// Повідомляє про вибрану дату в минулому\nfunction notifyPastTimedate() {\n    iziToast.warning({\n      theme: 'dark',\n      position: 'topRight',\n      message: 'Please choose a date in the future',\n      messageSize: '22',\n      backgroundColor: '#fd4b3f',\n      messageColor: '#fafafa',\n      close: false,\n      closeOnClick: false,\n      timeout: '3000',\n      pauseOnHover: true,\n      progressBar: false,\n      transitionIn: 'fadeIn',\n      transitionOut: 'fadeOut',\n    });\n  }\n"],"names":["elements","intervalId","onStartClick","options","onDatePeckerClose","picker","flatpickr","selectedDates","selectedDate","currentDate","notifyPastTimedate","updateTimer","convertMs","ms","days","hours","minutes","seconds","timeObject","addLeadingZero","value","iziToast"],"mappings":"+IAUA,MAAMA,EAAW,CACb,MAAO,SAAS,cAAc,kBAAkB,EAChD,MAAO,SAAS,cAAc,cAAc,EAC5C,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,EAChD,MAAO,SAAS,cAAc,QAAQ,CAC1C,EACE,IAAIC,EACJD,EAAS,MAAM,iBAAiB,QAASE,CAAY,EAEvD,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,KAAK,IAAK,EACvB,gBAAiB,EACjB,QAASC,CACb,EAEQC,EAASC,EAAUN,EAAS,MAAOG,CAAO,EAEhD,SAASC,EAAmBG,EAAe,CACzC,MAAMC,EAAeD,EAAc,CAAC,EAC9BE,EAAc,KAAK,MACrBD,EAAeC,GACpBC,IACGV,EAAS,MAAM,SAAW,IAE1BA,EAAS,MAAM,SAAW,GAG5BK,EAAO,aAAeG,CAC1B,CAEE,SAASN,GAAe,CAEtB,GADgBG,EAAO,cAAc,CAAC,EAAE,QAAS,EAAG,KAAK,OAC1C,EAAG,CAChBK,IACA,MACD,CACDV,EAAS,MAAM,SAAW,GAC1BA,EAAS,MAAM,SAAW,GAC1BW,IAEAV,EAAa,YAAYU,EAAa,GAAI,CAC3C,CAED,SAASC,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAGH,SAASN,GAAc,CACnB,MAAMH,EAAeH,EAAO,aACtBI,EAAc,KAAK,MACnBI,EAAKL,EAAeC,EAE1B,GAAII,EAAK,IAEP,cAAcZ,CAAU,EAExBD,EAAS,KAAK,YAAc,KAC5BA,EAAS,MAAM,YAAc,KAC7BA,EAAS,QAAQ,YAAc,KAC/BA,EAAS,QAAQ,YAAc,SAC1B,CAEL,MAAMkB,EAAaN,EAAUC,CAAE,EAE/Bb,EAAS,KAAK,YAAcmB,EAAeD,EAAW,IAAI,EAC1DlB,EAAS,MAAM,YAAcmB,EAAeD,EAAW,KAAK,EAC5DlB,EAAS,QAAQ,YAAcmB,EAAeD,EAAW,OAAO,EAChElB,EAAS,QAAQ,YAAcmB,EAAeD,EAAW,OAAO,CACjE,CACF,CAED,SAASC,EAAeC,EAAO,CAC7B,OAAOA,EAAQ,GAAK,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAAIA,CACtD,CAEDpB,EAAS,MAAM,iBAAiB,QAAS,IAAM,CAE7CC,EAAa,YAAYU,EAAa,GAAI,CAC3C,CAAA,EAGH,SAASD,GAAqB,CAC1BW,EAAS,QAAQ,CACf,MAAO,OACP,SAAU,WACV,QAAS,qCACT,YAAa,KACb,gBAAiB,UACjB,aAAc,UACd,MAAO,GACP,aAAc,GACd,QAAS,OACT,aAAc,GACd,YAAa,GACb,aAAc,SACd,cAAe,SACrB,CAAK,CACL"}